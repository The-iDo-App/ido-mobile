<!DOCTYPE html>
<html lang="en-us">
<!--inbox-->

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--font awesome script-->

    <script src="https://kit.fontawesome.com/bcbd543404.js" crossorigin="anonymous"></script>
    <!-- Bootstrap cdn link-->
    <!--Bootstrap script-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js " integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4 " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js " integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p " crossorigin="anonymous "></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js " integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT " crossorigin="anonymous "></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!--Material.io links-->
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <!--google fonts-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!--CSS-->
    <link rel="stylesheet" type="text/css" href="../css/message-settings.css">
    <meta name="viewport" media content="width=device-width, initial-scale=1.0">
</head>
<style>
    .container {
        max-width: 100%;
        position: relative;
        top: 90px;
        margin: auto;
        margin-bottom: 200px;
    }
    
    .modal-container {
        top: 0;
        height: auto;
    }
    
    .mdc-chip {
        background-color: #8999a8;
        color: white;
        height: 40px;
    }
    
    .mdc-chip:hover {
        background-color: #ff6e83 !important;
        color: white;
    }
    
    .mdc-chip--selected {
        background-color: #ff6e83 !important;
    }
    
    .mdc-chip--selected .mdc-chip__text {
        color: white;
    }
</style>

<body>
    <header style="position: fixed; width: 100%;top: 0; z-index: 100; background-color: white;">
        <div class="box">
            <i class="fa fa-arrow-left mx-auto my-auto" style="font-size: 25px; position: relative; top: 23px; left: 30px; color: #8999a8;" id="back-button"></i>
        </div>
        <hr style="margin: 0;">
    </header>
    <!--choices if block user, report or leave the convo-->
    <div class="container">
        <div class="message-settings-item" id="block" data-bs-toggle="modal" data-bs-target="#blockModal">
            <p class="item my-0">Block user
                <hr class="dropdown-divider">
            </p>
        </div>
        <div class="message-settings-item" id="report" data-bs-toggle="modal" data-bs-target="#reportModal">
            <p class="item my-0">Report user
                <hr class="dropdown-divider">
            </p>
        </div>
        <div class="message-settings-item" id="leave" data-bs-toggle="modal" data-bs-target="#leaveModal">
            <p class="item my-0">Leave conversation
                <hr class="dropdown-divider">
            </p>
        </div>
    </div>

    <!--block dialog-->
    <div class="modal" id="blockModal" tabindex="-1" role="dialog" aria-labelledby="blockModalLabel" aria-hidden="true" data-bs-backdrop="true">
        <div class="modal-dialog  modal-sm"></div>
        <div class="modal-content">
            <div class="modal-header">
                <button class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close" id="closebtn"></button>
            </div>
            <div class="modal-body ">
                <p class="block-statement ">Do you want to block this user?</p>
            </div>
            <div class="modal-footer ">
                <button class="btn no shadow-none" data-bs-dismiss="modal" aria-label="Close">No</button>
                <button class="btn block shadow-none" data-bs-dismiss="modal" aria-label="Close" id="blockBtn">Yes</button>
            </div>
        </div>
    </div>


    <!--Report dialog-->
    <div class="modal report" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="reportModalLabel" aria-hidden="true" data-bs-backdrop="true">
        <div class="modal-dialog  modal-sm"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="reportModalLabel ">What's wrong?</h5>
                <button class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close" id="closebtn "></button>
            </div>
            <div class="modal-body" style="height: 55%;">
                <p class="report-title">Tell us what is going on?</p>
                <p class="report-instructions">We use your feedback to help u learn when something's not right</p>
                <div class="container modal-container">
                    <!--reasons to report-->
                    <div class="mdc-chip-set mdc-chip-set--choice" role="grid">
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Harrassment</span>
                            </span>
                            </span>
                        </div>

                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Suicide or Self-Injury</span>
                            </span>
                            </span>
                        </div>

                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Sharing inappropriate Things</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Hate Speech</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Unauthorized Sales</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Spam</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">False News</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Hacked</span>
                            </span>
                            </span>
                        </div>
                        <div class="mdc-chip" role="row">
                            <span role="gridcell">
                            <span role="checkbox" tabindex="0" aria-checked="false" class="mdc-chip__primary-action">
                                <span class="mdc-chip__text">Technical Issue</span>
                            </span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer ">
                <button class="btn no shadow-none" data-bs-dismiss="modal" aria-label="Close">Discard</button>
                <button class="btn block shadow-none" data-bs-dismiss="modal" aria-label="Close" id="reportBtn ">Report</button>
            </div>
        </div>
    </div>

    <!--leave convo dialog-->
    <div class="modal" id="leaveModal" tabindex="-1" role="dialog" aria-labelledby="leaveModalLabel" aria-hidden="true" data-bs-backdrop="true">
        <div class="modal-dialog  modal-sm"></div>
        <div class="modal-content">
            <div class="modal-header">
                <button class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close" id="closebtn "></button>
            </div>
            <div class="modal-body">
                <p class="block-statement ">Do you want to leave this conversation?</p>
            </div>
            <div class="modal-footer">
                <button class="btn no shadow-none" data-bs-dismiss="modal" aria-label="Close">No</button>
                <button class="btn block shadow-none" data-bs-dismiss="modal" aria-label="Close" id="blockBtn ">Yes</button>
            </div>
        </div>
    </div>

    <script>
        //chips: choices for reasons to report
        new mdc.chips.MDCChipSet(document.querySelector('.mdc-chip-set'));
    </script>
</body>
</html>
<script src="../scripts/constants.js"></script>
<script>
  document.getElementById('back-button').addEventListener('click', () => {
    location.href = './chatbox.html' + location.hash;
  })
document.querySelector('#blockBtn').addEventListener('click', () => {
  let user_id = location.hash.slice(1);
  let access_token = localStorage.getItem('access_token');

  fetch(API_URL + 'api/settings/blocked-users', {
    method: 'POST',
    headers: {
      authorization: access_token,
      Accept: 'application/json',
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ user_id }),
  })
    .then((res) => res.json())
    .then((res) => {
      location.href = './inbox.html';
    });

})
</script>
